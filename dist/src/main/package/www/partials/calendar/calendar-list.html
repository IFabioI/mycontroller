<div class="calendar-tab">
  <button class="calendar-tabs" onclick="openCalendar(event)">London</button>
  <button class="calendar-new" onclick="newCalendar()">NEW</button>
</div>

<div class ="calendar">
  <div id="London" class="tabcontent">
<div class="calendar-month">
  <ul>
    <li class="prev"><button onclick="previous_month(event)">Prev</button></li>
    <li class="next"><button onclick="next_month(event)">Next</button></li>
    <li>August<br><span style="font-size:18px">2017</span></li>
  </ul>
</div>
<ul class="calendar-weekdays">
  <li>Su</li>
  <li>Mo</li>
  <li>Tu</li>
  <li>We</li>
  <li>Th</li>
  <li>Fr</li>
  <li>Sa</li>
</ul>
<div class = "calendar-unit">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
    <div>11</div>
    <div>12</div>
    <div>13</div>
    <div>14</div>
    <div>15</div>
    <div>16</div>
    <div>17</div>
    <div>18</div>
    <div>19</div>
    <div>20</div>
    <div>21</div>
    <div>22</div>
    <div>23</div>
    <div>24</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
    <div>X</div>
</div>
</div>
</div>
<script>
  const monthNames = ["January", "February", "March", "April", "May", "June",
    "July", "August", "September", "October", "November", "December"
  ];
  var curdate = new Date();
  setCalHeader();
  setCalDays()

  function openCalendar(evt)
  {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("calendar-tabs");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(evt.currentTarget.innerText).style.display = "block";
    evt.currentTarget.className += " active";

    setCalHeader();
    setCalDays();
  }

  function newCalendar()
  {
    var newid = Math.random();
    document.getElementsByClassName("calendar-tab")[0].innerHTML += '<button class="calendar-tabs" onclick="openCalendar(event)">' + newid + '</button>'
    document.getElementsByClassName("calendar")[0].innerHTML += '<div id="' + newid + '" class="tabcontent"><div class="calendar-month"><ul><li class="prev"><button onclick="previous_month()">Prev</button></li><li class="next"><button onclick="next_month()">Next</button></li><li>August<br><span style="font-size:18px">2017</span></li></ul></div><ul class="calendar-weekdays"><li>Su</li><li>Mo</li><li>Tu</li><li>We</li><li>Th</li><li>Fr</li><li>Sa</li></ul><div class = "calendar-unit"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div><div>X</div></div></div>'
  }

  function setCalHeader()
  {
    var sch = document.getElementsByClassName("calendar-month");
    for(var i = 0; i < sch.length;i++)
    {
      var header = sch[i].children[0].children[2];
      header.innerHTML = "" + monthNames[curdate.getMonth()] + '<br><span style="font-size:18px">2018</span>';
      header.children[1].innerHTML = curdate.getFullYear();
    }
  }

  function setCalDays()
  {
    var sch = document.getElementsByClassName("calendar-unit");
    for(var k = 0; k < sch.length;k++)
    {
      curdate.setDate(1);
      var weekday = curdate.getDay();
      var caldays = sch[k].children;
      var lastday = (new Date(curdate.getFullYear(), curdate.getMonth() + 1, 0).getDate());
      var i = 0;
      for(;i < weekday; i++)
      {
        caldays[i].innerHTML = "X";
      }
      for(var j = 1; j <= lastday; j++)
      {
        caldays[j+weekday-1].innerHTML = "" + j;
      }
      for(i = lastday + weekday; i < 42; i++)
      {
        caldays[i].innerHTML = "X";
      }
    }
  }

  function previous_month()
  {
    var month = curdate.getMonth() - 1;
    var year = curdate.getFullYear();
    if(month < 0) 
    {
      month += 12;
      year -= 1;
    }
    curdate.setMonth(month);
    curdate.setFullYear(year);
    setCalHeader();
    setCalDays()
  }

  function next_month()
  {
    var month = curdate.getMonth() + 1;
    var year = curdate.getFullYear();
    if(month > 11) 
    {
      month -= 12;
      year += 1;
    }
    curdate.setMonth(month);
    curdate.setFullYear(year);
    setCalHeader();
    setCalDays()
  }
</script>